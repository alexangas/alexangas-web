resources:
  pipelines:
  - pipeline: $(PipelineResource)
    source: $(PipelineDefinition)
    trigger:
      branches:
      - master

jobs:
  - job: Deploy
    pool:
      vmImage: 'ubuntu-latest'
    steps:
      - download: $(PipelineResource)
        artifact: $(ArtifactName)
      - template: ./_azcopy-linux.yml
        parameters:
          command: 'sync'
          source: '$(Pipeline.Workspace)/$(PipelineResource)/$(ArtifactName)'
          destination: '$(DestinationContainer)'
          destinationsas: '$(SasToken)'
          options: '--delete-destination=true'
