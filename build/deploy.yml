resources:
  pipelines:
  - pipeline: alexangasweb
    source: alexangas.alexangas-web-ci
    trigger: 
      branches:
      - master

jobs:
  - job: Deploy
    timeoutInMinutes: 10
    cancelTimeoutInMinutes: 0
    pool:
      vmImage: 'ubuntu-latest'
    steps:
      - task: DownloadBuildArtifacts@0
        inputs:
          buildType: 'specific'
          project: '$(ProjectId)'
          pipeline: '$(ProjectDefinition)'
          specificBuildWithTriggering: true
          buildVersionToDownload: 'latestFromBranch'
          branchName: 'refs/heads/master'
          downloadType: 'single'
          artifactName: 'drop'
          downloadPath: '$(System.ArtifactsDirectory)/drop'
      - task: AzureFileCopy@4
        inputs:
          SourcePath: 'drop'
          azureSubscription: '$(Subscription)'
          Destination: 'AzureBlob'
          storage: '$(Storage)'
          ContainerName: '$web'
          sasTokenTimeOutInMinutes: '10'
