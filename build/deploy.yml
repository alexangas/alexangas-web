resources:
  pipelines:
  - pipeline: alexangasweb
    source: alexangas.alexangas-web-ci
    trigger: 
      branches:
      - master

jobs:
  - job: DeployWindows
    timeoutInMinutes: 10
    cancelTimeoutInMinutes: 0
    pool:
      vmImage: 'windows-latest'
    steps:
      - task: DownloadBuildArtifacts@0
        displayName: "Download build artifacts"
        inputs:
          buildType: 'specific'
          project: '$(ProjectId)'
          pipeline: '$(ProjectDefinition)'
          specificBuildWithTriggering: true
          buildVersionToDownload: 'latestFromBranch'
          branchName: 'refs/heads/master'
          downloadType: 'single'
          artifactName: 'drop'
          downloadPath: '$(System.ArtifactsDirectory)'
      - template: ./_pwsh.yml
  - job: DeployLinux
    timeoutInMinutes: 10
    cancelTimeoutInMinutes: 0
    pool:
      vmImage: 'ubuntu-latest'
    steps:
      - task: DownloadBuildArtifacts@0
        displayName: "Download build artifacts"
        inputs:
          buildType: 'specific'
          project: '$(ProjectId)'
          pipeline: '$(ProjectDefinition)'
          specificBuildWithTriggering: true
          buildVersionToDownload: 'latestFromBranch'
          branchName: 'refs/heads/master'
          downloadType: 'single'
          artifactName: 'drop'
          downloadPath: '$(System.ArtifactsDirectory)'
      - template: ./_pwsh.yml
    