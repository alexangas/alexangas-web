resources:
  pipelines:
  - pipeline: alexangasweb
    source: alexangas.alexangas-web-ci
    trigger:
      branches:
      - master

jobs:
  - job: DeployTwo
    pool:
      vmImage: 'windows-latest'
    condition: succeededOrFailed()
    steps:
      - download: 'alexangasweb'
        artifact: 'drop'
      - template: ./_azcopy-windows.yml
        parameters:
          command: 'sync'
          source: '$(Pipeline.Workspace)\alexangasweb\drop'
          destination: 'https://azcopyplay.blob.core.windows.net/`$web'
          destinationsas: '$(SasToken)'
  - job: DeployTwoLinux
    pool:
      vmImage: 'ubuntu-latest'
    condition: succeededOrFailed()
    steps:
      - download: 'alexangasweb'
        artifact: 'drop'
      - template: ./_azcopy-linux.yml
        parameters:
          command: 'sync'
          source: '$(Pipeline.Workspace)/alexangasweb/drop'
          destination: 'https://azcopyplay.blob.core.windows.net/`$web'
          destinationsas: '$(SasToken)'
          options: '--delete-destination=true'
